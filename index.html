<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <title>Abhinav Chawla</title>
        <link rel="stylesheet" href="main.css">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Josefin+Slab' rel='stylesheet' type='text/css'>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script src="Extras/jquery.easing.1.3.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-6 left-side">
                    <div class="scroll-down-text">Abhinav Chawla
                    </div>
                </div>
                
                <div class="col-6 right-side">
                    <img id="tree_branch" src="Extras/tree_branch.png"/>
                    <img id="bird" src="Extras/Bird1.png"/>
                    <img class="apple1" src="Extras/apple11.png"/>
                    <img class="apple2" src="Extras/apple21.png"/>
                    <img class="apple3" src="Extras/apple31.png"/>
<!--                    <p>hell</p>-->
<!--
                    <div id="message">
                    Current scroll position: 0
                    </div>
-->
                     
<!--                    <input type="button" id="increaseprogress" value="Kiddan vi?"/>-->
                    
                </div>
                
            </div>
            <progress id="progressbar" value="00" max="100"></progress>
           
        </div>
        <script>
            
        $(document).ready ( function(){
            applie();
        });

         $('.apple1').click(function(){
           
            var bar = $('#progressbar');
            var presentvalue = bar.val();
            var bartop = bar.offset().top;
            //bar.val(60);            
            var scrolltext = $('.scroll-down-text');
            var top1 = scrolltext.offset().top;
            var wh = $(window).height();
            bar.animate({ value: "+=20" }, 1000);
            
            var apple1 = $('.apple1');
            apple1.animate({ top: wh - 140 }, 1200, 'easeInQuad', function(){
                apple1.css({visibility: 'collapse'}); 
                $('.right-side').delay(1000).queue(function(){
                   $('.right-side').prepend('<img class="apple1" src ="Extras/apple11.png"/>');
                    applie();
                })
            });
             
            if (top1 + 0.2*wh < wh - 40){
                scrolltext.animate({top: top1 + 0.2*wh - 7}, 1000);
            }
            else{
                scrolltext.animate({top: wh - 40}, 1000);
            }
            if (top1 + 0.2*wh > .9*wh){
                scrolltext.delay(0).queue( function(next){ 
                    $(this).css({color:'#f2f2f2'}); 
                    next(); 
                  });
            }
         })
         
        $('.apple2').click(function(){
           
            var bar = $('#progressbar');
            var presentvalue = bar.val();
            var bartop = bar.offset().top;
            //bar.val(60);            
            var scrolltext = $('.scroll-down-text');
            var top1 = scrolltext.offset().top;
            var wh = $(window).height();
            bar.animate({ value: "+=30" }, 1000);
            
            
            var apple2 = $('.apple2');
            apple2.animate({ top: wh - 140 }, 1200, 'easeInQuad', function(){
                apple2.css({visibility: 'collapse'});
                $('.right-side').delay(1000).queue(function(){
                   $('.right-side').append('<img class="apple2" src ="Extras/apple21.png"/>');
                    applie();
                })
            });
             
            
            if (top1 + 0.3*wh < wh - 40){
                scrolltext.animate({top: top1 + 0.3*wh - 7}, 1000);
            }
            else{
                scrolltext.animate({top: wh - 40}, 1000);
            }
            if (top1 + 0.3*wh > .9*wh){
                scrolltext.delay(0).queue( function(next){ 
                    $(this).css({color:'#f2f2f2'}); 
                    next(); 
                  });
            }
         })
        
         $('.apple3').click(function(){
            var bar = $('#progressbar');
            var presentvalue = bar.val();
            var bartop = bar.offset().top;
            //bar.val(60);            
            var scrolltext = $('.scroll-down-text');
            var top1 = scrolltext.offset().top;
            var wh = $(window).height();
            bar.animate({ value: "+=40" }, 1000);
             
             
            var apple3 = $('.apple3');
            apple3.animate({ top: wh - 140 }, 1200, 'easeInQuad', function(){
                apple3.css({visibility: 'collapse'});
                $('.right-side').delay(1000).queue(function(){
                   $('.right-side').prepend('<img class="apple3" src ="Extras/apple31.png"/>');
                    applie();
                })
            });
             
            if (top1 + 0.4*wh < wh - 40){
                scrolltext.animate({top: top1 + 0.4*wh - 7}, 1000);
            }
            else{
                scrolltext.animate({top: wh - 40}, 1000);
            }
            if (top1 + 0.4*wh > .9*wh){
                scrolltext.delay(0).queue( function(next){ 
                    $(this).css({color:'#f2f2f2'}); 
                    next(); 
                  });
            }
         })
            
           
//        $(document).on("keyup", function(e) {
//            
////            var p = $("p:last");
//            var code = e.which;
//            var bar = $('#progressbar');
//            var presentvalue = bar.val();
//            var bartop = bar.offset().top;
//            //bar.val(60);            
//            var scrolltext = $('.scroll-down-text');
//            var top1 = scrolltext.offset().top;
//            var dif = $(document).height() - $(window).height();
//            
//            var wh = $(window).height(); 
////             p.html(wh + '% ||  dif: ' + dif);
//            
//            if (code == 40) { 
//                bar.animate({ value: "+=20" }, 1000);
//                if (top1 + 0.2*wh < wh - 40){
//                    scrolltext.animate({top: top1 + 0.2*wh - 7}, 1000);
//                }
//                else{
//                    scrolltext.animate({top: wh - 40}, 1000);
//                }
//                if (top1 + 0.2*wh > .9*wh){
//                    scrolltext.delay(0).queue( function(next){ 
//                        $(this).css({color:'#f2f2f2'}); 
//                        next(); 
//                      });
//                }
//
//            } else if (code == 38) {
//                bar.animate({ value: "+=30" }, 1000);
//                if (top1 + 0.3*wh < wh - 40){
//                    scrolltext.animate({top: top1 + 0.3*wh - 7}, 1000);
//                }
//                else{
//                    scrolltext.animate({top: wh - 40}, 1000);
//                }
//                if (top1 + 0.3*wh > .9*wh){
//                    scrolltext.delay(0).queue( function(next){ 
//                        $(this).css({color:'#f2f2f2'}); 
//                        next(); 
//                      });
//                }
//            }
//        });
//            
            
        //progress bar increases on button click
        $('#increaseprogress').click(function(){
            var p = $("p:last");
            
            
            var bar = $('#progressbar');
            var presentvalue = bar.val();
            
            //bar.val(60);
            bar.animate({ value: "+=20" }, 1000);
            
            var scrolltext = $('.scroll-down-text');
            var top1 = scrolltext.offset().top;
            var dif = $(document).height() - $(window).height();
            var wh = $(window).height(); 
            p.html(wh + '%');
            if (top1 + 0.2*wh -5 < wh){
                scrolltext.animate({top: top1 + 0.2*wh + 8}, 1000);
            }
            if (top1 + 0.2*wh -5 > .8*wh){
                scrolltext.delay(0).queue( function(next){ 
                    $(this).css({color:'#f2f2f2'}); 
                    next(); 
                  });
                
//                scrolltext.css({color:'#f2f2f2'});
            }

        })
            
//        //runs on scroll, text moves accordingly
//        $(window).scroll(function() {
//            var scrolltext = $('.scroll-down-text');
//            var dheight = $(document).height();
//            var dif = $(document).height() - $(window).height();
//            var scrolltop = $(document).scrollTop();
//            var wh = $(window).height(); 
//            var ratio = scrolltop/dif;
//            var rowh = $('.row').height();
//
//            if (ratio > .02){
//            scrolltext.css({top: wh*ratio/1.05 - 200});          
//            }
//            else{
//                scrolltext.css({top:20});
//            }
//        })
        function applie(){
            var apple1 = $('.apple1');
            var apple2 = $('.apple2');
            var apple3 = $('.apple3');
            var flag1 = false;
            setInterval(function(){
                apple1.attr('src', 'Extras/apple1' + (flag1 ? 1 : 2) + '.png');
                apple2.attr('src', 'Extras/apple2' + (flag1 ? 1 : 2) + '.png');
                apple3.attr('src', 'Extras/apple3' + (flag1 ? 1 : 2) + '.png');
                flag1 = !flag1;
    //            if (flag1){
    //                apple1.css({opacity: 0.85});
    //                apple2.css({opacity: 0.85});
    //                apple3.css({opacity: 0.85});
    //            }
    //            else{
    //                apple1.css({opacity: 1});
    //                apple2.css({opacity: 1});
    //                apple3.css({opacity: 1});
    //            }
            }, 800);
        }
            
        var birdie = $('#bird');
        var flag = false;
        setInterval(function(){
            birdie.attr('src', 'Extras/Bird' + (flag ? 1 : 2) + '.png');
            flag = !flag;
        }, 350);
        
       


        </script>
    </body>
    