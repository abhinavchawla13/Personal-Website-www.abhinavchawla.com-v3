<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <title>Abhinav Chawla</title>
        <link rel="stylesheet" href="main.css">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Josefin+Slab' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Alegreya+Sans' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script src="Extras/jquery.easing.1.3.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-6 left-side">
                    <div class="scroll-down-text">Abhinav Chawla
                    </div>
                </div>
                
                <div class="col-6 right-side">
                    <img id="tree_branch" src="Extras/tree_branch.png"/>
                    <img id="bird" src="Extras/Bird1.png"/>
                    <img class="apple1" src="Extras/apple11.png"/>
                    <img class="apple2" src="Extras/apple21.png"/>
                    <img class="apple3" src="Extras/apple31.png"/>
                    <img class="apple4" src="Extras/apple41.png"/>
                    <img class="apple5" src="Extras/apple51.png"/>
                    <img class="basket1" src="Extras/basket.png"/>
                    <img class="basket2" src="Extras/basket.png"/>
                    
<!--                    <p>hell</p>-->
<!--
                    <div id="message">
                    Current scroll position: 0
                    </div>
-->
                     
<!--                    <input type="button" id="increaseprogress" value="Kiddan vi?"/>-->
                    
                </div>
                
            </div>
            <progress id="progressbar" value="00" max="100"></progress>
           
        </div>
        <script>
        
        flaga1 = false;
        flaga2 = false;
        flaga3 = false;
        flaga4 = false;
        flaga5 = false;
            
        $(document).ready ( function(){
            var ispossible = true;
            applie();
            apple1drop();
            apple2drop();
            apple3drop();
            apple4drop();
            apple5drop();
            
        });
        
            
        function apple1drop(){
             $('.apple1').click(function(){

                var bar = $('#progressbar');
                var presentvalue = bar.val();
                if (presentvalue < 100){
                    var bartop = bar.offset().top;
                    //bar.val(60);            
                    var scrolltext = $('.scroll-down-text');
                    var top1 = scrolltext.offset().top;
                    var wh = $(window).height();
                    bar.animate({ value: "+=10" }, 1000);

                    var apple1 = $('.apple1');
                    apple1.animate({ top: wh - 205 }, 1200, 'easeInQuad', function(){
//                        apple1.css({visibility: 'collapse'}); 
                        if (!flaga5){
                            $('.basket1').delay(0).queue(function(next){
                                $(this).attr('src', 'Extras/basket_a1_f.png');
                            })
                        }
                        else{
                             $('.basket1').attr('src', 'Extras/basket_a1_a5.png');
                            
                        }
                    flaga1 = true;
                    apple1.remove();
                        
                    
    //                    $('.right-side').delay(1000).queue(function(){
    //                       $('.right-side').append('<img class="apple1" src ="Extras/apple11.png"/>');
    //                        applie();
    //                        apple1drop();
    //                    })
                    });
                    
                    

                    if (top1 + 0.1*wh < wh - 40){
                        scrolltext.animate({top: top1 + 0.1*wh - 7}, 1000);
                    }
                    else{
                        scrolltext.animate({top: wh - 44}, 1000);
                    }
                    if (top1 + 0.1*wh > .9*wh){
                        ispossible = false;
                        scrolltext.delay(0).queue( function(next){ 
                            $(this).css({color:'#f2f2f2'}); 
                            next(); 
                          });
                    }
                }
                
                
             })
        }
        
        function apple2drop(){
            $('.apple2').click(function(){

                var bar = $('#progressbar');
                var presentvalue = bar.val();
                if (presentvalue < 100){
                    var bartop = bar.offset().top;
                    //bar.val(60);            
                    var scrolltext = $('.scroll-down-text');
                    var top1 = scrolltext.offset().top;
                    var wh = $(window).height();
                    bar.animate({ value: "+=30" }, 1000);


                    var apple2 = $('.apple2');
                    apple2.animate({ top: wh - 140 }, 1200, 'easeInQuad', function(){
    //                    apple2.css({visibility: 'collapse'});
                        
                        apple2.remove();
    //                    $('.right-side').delay(1000).queue(function(){
    //                       $('.right-side').append('<img class="apple2" src ="Extras/apple21.png"/>');
    //                        applie();
    //                        apple2drop();
    //                    })
                    });


                    if (top1 + 0.3*wh < wh - 40){
                        scrolltext.animate({top: top1 + 0.3*wh - 7}, 1000);
                    }
                    else{
                        scrolltext.animate({top: wh - 36}, 1000);
                    }
                    if (top1 + 0.3*wh > .9*wh){
                        scrolltext.delay(0).queue( function(next){ 
                            $(this).css({color:'#f2f2f2'}); 
                            next(); 
                          });
                    }
                }
             })
        }
        
        function apple3drop(){
             $('.apple3').click(function(){
                var bar = $('#progressbar');
                var presentvalue = bar.val();
                if (presentvalue < 100){
                    var bartop = bar.offset().top;
                    //bar.val(60);            
                    var scrolltext = $('.scroll-down-text');
                    var top1 = scrolltext.offset().top;
                    var wh = $(window).height();
                    bar.animate({ value: "+=40" }, 1000);


                    var apple3 = $('.apple3');
                    apple3.animate({ top: wh - 140 }, 1200, 'easeInQuad', function(){
    //                    apple3.css({visibility: 'collapse'});
//                        if (true){
//                            $('.basket1').delay(0).queue(function(next){
//                                $(this).attr('src', 'Extras/basket_a3_f.png')
//                            })
//                        }
//                        else{
//                             $('.basket1').delay(0).queue(function(next){
//                            $(this).attr('src', 'Extras/basket_a1_a3.png')
//                             })
//                        }
                        apple3.remove();
//                        flaga3 = true;
    //                    $('.right-side').delay(1000).queue(function(){
    //                        $('<img class="apple3" src ="Extras/apple31.png" css="top:0!important"/>').appendTo($('.right-side'));
    ////                        $('.right-side').add('<img class="apple3" src ="Extras/apple31.png"/>');
    ////                       $('.right-side').append('<img class="apple3" src ="Extras/apple31.png"/>');
    //                        applie();
    //                        apple3drop();
    //                    })
                    });

                    if (top1 + 0.4*wh < wh - 40){
                        scrolltext.animate({top: top1 + 0.4*wh - 7}, 1000);
                    }
                    else{
                        scrolltext.animate({top: wh - 44}, 1000);
                    }
                    if (top1 + 0.4*wh > .9*wh){
                        scrolltext.delay(0).queue( function(next){ 
                            $(this).css({color:'#f2f2f2'}); 
                            next(); 
                          });
                    }
                }
             })
        }
            
        function apple4drop(){
             $('.apple4').click(function(){

                var bar = $('#progressbar');
                var presentvalue = bar.val();
                if(presentvalue < 100){
                    var bartop = bar.offset().top;
                    //bar.val(60);            
                    var scrolltext = $('.scroll-down-text');
                    var top1 = scrolltext.offset().top;
                    var wh = $(window).height();
                    bar.animate({ value: "+=20" }, 1000);

                    var apple4 = $('.apple4');
                    apple4.animate({ top: wh - 140 }, 1200, 'easeInQuad', function(){
    //                    apple1.css({visibility: 'collapse'}); 
                        apple4.remove();
    //                    $('.right-side').delay(1000).queue(function(){
    //                       $('.right-side').append('<img class="apple4" src ="Extras/apple41.png"/>');
    //                        applie();
    //                        apple4drop();
    //                    })
                    });

                    if (top1 + 0.2*wh < wh - 40){
                        scrolltext.animate({top: top1 + 0.2*wh - 7}, 1000);
                    }
                    else{
                        scrolltext.animate({top: wh - 44}, 1000);
                    }
                    if (top1 + 0.2*wh > .9*wh){
                        scrolltext.delay(0).queue( function(next){ 
                            $(this).css({color:'#f2f2f2'}); 
                            next(); 
                          });
                    }
                 }
             })
        }
        
            function apple5drop(){
             $('.apple5').click(function(){

                var bar = $('#progressbar');
                var presentvalue = bar.val();
                if (presentvalue <  100){
                    var bartop = bar.offset().top;
                    //bar.val(60);            
                    var scrolltext = $('.scroll-down-text');
                    var top1 = scrolltext.offset().top;
                    var wh = $(window).height();
                    bar.animate({ value: "+=30" }, 1000);

                    var apple5 = $('.apple5');
                    apple5.animate({ top: wh - 205 }, 1200, 'easeInQuad', function(){
                        if (!flaga1){
                            $('.basket1').delay(0).queue(function(next){
                                $(this).attr('src', 'Extras/basket_a5_f.png');
                            })
                        }
                        else{
                             $('.basket1').attr('src', 'Extras/basket_a1_a5.png');
                        }
                        flaga5 = true;
    //                    apple1.css({visibility: 'collapse'}); 
                        apple5.remove();
    //                    $('.right-side').delay(1000).queue(function(){
    //                       $('.right-side').append('<img class="apple4" src ="Extras/apple41.png"/>');
    //                        applie();
    //                        apple4drop();
    //                    })
                    });

                    if (top1 + 0.3*wh < wh - 40){
                        scrolltext.animate({top: top1 + 0.3*wh - 7}, 1000);
                    }
                    else{
                        scrolltext.animate({top: wh - 44}, 1000);
                    }
                    if (top1 + 0.3*wh > .9*wh){
                        scrolltext.delay(0).queue( function(next){ 
                            $(this).css({color:'#f2f2f2'}); 
                            next(); 
                          });
                    }
                 }
             })
        }
//        $(document).on("keyup", function(e) {
//            
////            var p = $("p:last");
//            var code = e.which;
//            var bar = $('#progressbar');
//            var presentvalue = bar.val();
//            var bartop = bar.offset().top;
//            //bar.val(60);            
//            var scrolltext = $('.scroll-down-text');
//            var top1 = scrolltext.offset().top;
//            var dif = $(document).height() - $(window).height();
//            
//            var wh = $(window).height(); 
////             p.html(wh + '% ||  dif: ' + dif);
//            
//            if (code == 40) { 
//                bar.animate({ value: "+=20" }, 1000);
//                if (top1 + 0.2*wh < wh - 40){
//                    scrolltext.animate({top: top1 + 0.2*wh - 7}, 1000);
//                }
//                else{
//                    scrolltext.animate({top: wh - 40}, 1000);
//                }
//                if (top1 + 0.2*wh > .9*wh){
//                    scrolltext.delay(0).queue( function(next){ 
//                        $(this).css({color:'#f2f2f2'}); 
//                        next(); 
//                      });
//                }
//
//            } else if (code == 38) {
//                bar.animate({ value: "+=30" }, 1000);
//                if (top1 + 0.3*wh < wh - 40){
//                    scrolltext.animate({top: top1 + 0.3*wh - 7}, 1000);
//                }
//                else{
//                    scrolltext.animate({top: wh - 40}, 1000);
//                }
//                if (top1 + 0.3*wh > .9*wh){
//                    scrolltext.delay(0).queue( function(next){ 
//                        $(this).css({color:'#f2f2f2'}); 
//                        next(); 
//                      });
//                }
//            }
//        });
//            
            
        //progress bar increases on button click
        $('#increaseprogress').click(function(){
            var p = $("p:last");
            
            
            var bar = $('#progressbar');
            var presentvalue = bar.val();
            
            //bar.val(60);
            bar.animate({ value: "+=20" }, 1000);
            
            var scrolltext = $('.scroll-down-text');
            var top1 = scrolltext.offset().top;
            var dif = $(document).height() - $(window).height();
            var wh = $(window).height(); 
            p.html(wh + '%');
            if (top1 + 0.2*wh -5 < wh){
                scrolltext.animate({top: top1 + 0.2*wh + 8}, 1000);
            }
            if (top1 + 0.2*wh -5 > .8*wh){
                scrolltext.delay(0).queue( function(next){ 
                    $(this).css({color:'#f2f2f2'}); 
                    next(); 
                  });
                
//                scrolltext.css({color:'#f2f2f2'});
            }

        })
            
//        //runs on scroll, text moves accordingly
//        $(window).scroll(function() {
//            var scrolltext = $('.scroll-down-text');
//            var dheight = $(document).height();
//            var dif = $(document).height() - $(window).height();
//            var scrolltop = $(document).scrollTop();
//            var wh = $(window).height(); 
//            var ratio = scrolltop/dif;
//            var rowh = $('.row').height();
//
//            if (ratio > .02){
//            scrolltext.css({top: wh*ratio/1.05 - 200});          
//            }
//            else{
//                scrolltext.css({top:20});
//            }
//        })
        
        function applie(){
            var apple1 = $('.apple1');
            var apple2 = $('.apple2');
            var apple3 = $('.apple3');
            var apple4 = $('.apple4');
            var apple5 = $('.apple5');
            var flag1 = false;
            setInterval(function(){
                apple1.attr('src', 'Extras/apple1' + (flag1 ? 1 : 2) + '.png');
                apple2.attr('src', 'Extras/apple2' + (flag1 ? 1 : 2) + '.png');
                apple3.attr('src', 'Extras/apple3' + (flag1 ? 1 : 2) + '.png');
                apple4.attr('src', 'Extras/apple4' + (flag1 ? 1 : 2) + '.png');
                apple5.attr('src', 'Extras/apple5' + (flag1 ? 1 : 2) + '.png');

                flag1 = !flag1;
    //            if (flag1){
    //                apple1.css({opacity: 0.85});
    //                apple2.css({opacity: 0.85});
    //                apple3.css({opacity: 0.85});
    //            }
    //            else{
    //                apple1.css({opacity: 1});
    //                apple2.css({opacity: 1});
    //                apple3.css({opacity: 1});
    //            }
            }, 800);
        }
            
        var birdie = $('#bird');
        var flag = false;
        setInterval(function(){
            birdie.attr('src', 'Extras/Bird' + (flag ? 1 : 2) + '.png');
            flag = !flag;
        }, 350);
        
       


        </script>
    </body>
    